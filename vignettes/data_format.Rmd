---
title: "Data Format"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

The **rater** package implements models of annotation which are flexible enough
to allow incomplete designs. That is, every rater may rate each object any number
of times, including zero. This is a great advantage as it allows all types of real world
data to be used with the package. However, it does mean that the data structure
used by the package needs to be able accommodate this complexity.

The **rater** package uses a *long* (database-style) format for the data.  It
takes as input a table with three columns, with each row representing a single
rating for a single item given by a single rater.

To illustrate this, let's look at the `anesthesia` dataset included in the package.

```{r}
library(rater)
data("anesthesia")

s_anesthesia <- head(anesthesia)

knitr::kable(s_anesthesia)
```

Here we see there are three columns. These are:

1. `ii`, item index - which item is being rated
2. `jj`, rater (annotator) index - which rater is doing the rating
3. `y`, rating - the rating for the item given by the rater

The last row of the example data above should be read as: 'the fourth rater
gave a rating of 1 for the first item'

This data format can easily include missing rater-item combinations (by simply
not including rows for any such combinations) as well as multiple such
combinations (by having multiple rows with the same values for rater and item).
The first three rows of the example above show rater 1 rating item 1 three
times.


## Multinomial model

There is one exception to the above structure.

The multinomial model, one of the models implemented in this package, is
simpler than the other models in that it does not distinguish between different
raters (it pools the data across raters). Therefore, there is need to specify
which rater rated each item. The input data for this model only needs to have
2 columns:

1. Item index 
2. Rating

For example, it should look similar to this:

```{r}
s_anesthesia_multi <- s_anesthesia[, c(1, 3)]

knitr::kable(s_anesthesia_multi)
```

As data of this form could be stored in many formats, at this stage we have not
automated the conversion of arbitrary data to the format described here.  It is
the user's responsibility to ensure correctly formatted data is passed to the
models.
